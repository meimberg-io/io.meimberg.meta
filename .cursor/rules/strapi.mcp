# strapi.mcp
# Rules for Strapi 5.x backend/CMS projects
# Author: Oli Meimberg
# Version: 1.0

rules:
  - type: edit
    pattern: "src/api/**/*.{ts,js}"
    allow: true
    message: "API edits allowed"

  - type: edit
    pattern: "src/plugins/**/*.{ts,js}"
    allow: true
    message: "Plugin edits allowed"

  - type: security
    denyPatterns:
      - "config/database.{ts,js}"
      - "config/admin.{ts,js}"
      - ".env"
    message: "Strapi config files protected"

  - type: style
    framework: "strapi"
    version: "5.x"
    note: >
      Strapi 5 conventions:
      - TypeScript for all custom code
      - Use Strapi's type system
      - Follow plugin architecture
      - Implement proper lifecycle hooks
      - Use services for business logic
      - Controllers for routing only

  - type: custom
    note: >
      File structure:
      - src/api/ - content types, controllers, services, routes
      - src/plugins/ - custom plugins
      - src/middlewares/ - custom middlewares
      - src/policies/ - access policies
      - config/ - application configuration

  - type: custom
    note: >
      Best practices:
      - Keep controllers thin, services fat
      - Use findMany/findOne with proper population
      - Implement proper error handling
      - Use lifecycle hooks for complex operations
      - Validate input data
      - Document API endpoints

